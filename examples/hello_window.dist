// hello_window.dist -- minimal hello window test.
// Auto-closes after a short run to keep make target deterministic.

if (system("test -n \"$DISTURB_HEADLESS\"") == 0) {
  println("hello_window skipped (DISTURB_HEADLESS set)");
}
else {
  eval(read("disturb_bindings/raylib.disturb"));

  initWindow(800, 450, "Disturb + raylib: Hello");
  setTargetFPS(60);

  frame = 0;
  max_frames = 180;

  while (shouldClose() == 0 && isKeyPressed(KEY_ESCAPE) == 0 && frame < max_frames) {
    frame = frame + 1;

    begin();
    clear(COLOR_RAYWHITE);
    drawText("Hello from Disturb + raylib", 170, 190, 34, COLOR_DARKGRAY);
    drawText("Frame: " + frame, 10, 10, 20, COLOR_BLUE);
    end();
  }

  closeWindow();
  println("hello_window finished after " + frame + " frames");
}
