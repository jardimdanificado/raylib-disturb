// raylib [core] example - keyboard input (Disturb port)

eval(read("examples_raylib_port/common.dist"));
name = "core_input_keys";
if (port_has_display() == 0) {
  cv = beginOffscreenColor(160, 90, PORT_RAYWHITE);
  x = 80;
  y = 45;
  i = 0;
  while (i < 8) { x = x + 1; y = y - 1; i = i + 1; }
  offscreenDrawCircle(cv, x, y, 8, PORT_RED);
  if (assertPixelEquals(name, cv, x, y, PORT_RED) == 1) {
    port_pass_headless(name);
  }
}
else {
  x = 320; y = 180;
  port_window_begin(640, 360, "raylib core: input keys");
  frame = 0;
  while (raylib_phase3.rl2_WindowShouldClose() == 0 && frame < 180) {
    frame = frame + 1;
    if (raylib_phase3.rl2_IsKeyDown(PORT_KEY_LEFT) != 0) { x = x - 2; }
    if (raylib_phase3.rl2_IsKeyDown(PORT_KEY_RIGHT) != 0) { x = x + 2; }
    if (raylib_phase3.rl2_IsKeyDown(PORT_KEY_UP) != 0) { y = y - 2; }
    if (raylib_phase3.rl2_IsKeyDown(PORT_KEY_DOWN) != 0) { y = y + 2; }
    raylib_phase3.rl2_BeginDrawing();
    raylib_phase3.rl2_ClearBackground(PORT_RAYWHITE);
    raylib_phase3.rl2_DrawCircle(x, y, 24, PORT_RED);
    raylib_phase3.rl2_DrawText("Use arrow keys", 20, 20, 20, PORT_DARKGRAY);
    raylib_phase3.rl2_EndDrawing();
  }
  port_window_end();
  port_pass_windowed(name);
}
