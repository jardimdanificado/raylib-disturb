// raylib [text] example - input box (Disturb port)
// Source: text/text_input_box.c

eval(read("examples_raylib_port/common.dist"));
name = "text_input_box";
if (port_has_display() == 0) {
  cv = beginOffscreenColor(180, 110, PORT_RAYWHITE);
  offscreenDrawRectLines(cv, 30, 40, 100, 24, PORT_DARKGRAY);
  offscreenDrawText(cv, "key:65", 40, 45, 10, PORT_MAROON);
  ok = 0;
  if (assertPixelEquals(name, cv, 30, 40, PORT_DARKGRAY) == 1) {
    if (assertPixelNotEquals(name, cv, 42, 47, PORT_RAYWHITE) == 1) { ok = 1; }
  }
  if (ok == 1) { port_pass_headless(name); }
}
else {
  last_key = 0;
  port_window_begin(800, 450, "raylib text: input box");
  frame = 0;
  while (raylib_phase3.rl2_WindowShouldClose() == 0 && frame < 120) {
    frame = frame + 1;
    k = raylib_phase3.rl2_GetKeyPressed();
    if (k > 0) { last_key = k; }

    raylib_phase3.rl2_BeginDrawing();
    raylib_phase3.rl2_ClearBackground(PORT_RAYWHITE);
    raylib_phase3.rl2_DrawRectangleLines(220, 180, 360, 80, PORT_DARKGRAY);
    raylib_phase3.rl2_DrawText("press keyboard keys", 260, 150, 20, PORT_DARKGRAY);
    raylib_phase3.rl2_DrawText("last key: " + last_key, 280, 205, 30, PORT_MAROON);
    raylib_phase3.rl2_EndDrawing();
  }
  port_window_end();
  port_pass_windowed(name);
}
