// Visual regression: faithful translation of raylib/examples/textures/textures_logo_raylib.c
// Window: 800x450, loads texture from resources/raylib_logo.png, no input.
// Must run with cwd = raylib/examples/textures so resources/ resolves correctly.

eval(read("generated/raylib_ffi_phase3.dist"));

RAYWHITE = 0xF5F5F5FF;
WHITE    = 0xFFFFFFFF;
GRAY     = 0x828282FF;

frames = 120;
output = "out/disturb/textures_logo_raylib.png";

raylib_phase3.rl2_InitWindow(800, 450, "raylib [textures] example - logo raylib");

// Load texture AFTER window init (OpenGL context required).
// Use full path from project root (Disturb runs from ROOT for FFI resolution).
texture = raylib_phase3.rl2_LoadTexture("raylib/examples/textures/resources/raylib_logo.png");

// texture is 256x256; center it: screenWidth/2 - 128 = 272, screenHeight/2 - 128 = 97
// (GetTextureWidth/Height not available in shim; dimensions known from asset)
tex_x = 400 - 256 / 2;
tex_y = 225 - 256 / 2;

raylib_phase3.rl2_SetTargetFPS(60);

rf = 0;
while (raylib_phase3.rl2_WindowShouldClose() == 0 && rf < frames) {
  raylib_phase3.rl2_BeginDrawing();
  raylib_phase3.rl2_ClearBackground(RAYWHITE);
  raylib_phase3.rl2_DrawTexture(texture, tex_x, tex_y, WHITE);
  raylib_phase3.rl2_DrawText("this IS a texture!", 360, 370, 10, GRAY);
  raylib_phase3.rl2_EndDrawing();
  rf = rf + 1;
}

raylib_phase3.rl2_TakeScreenshot(output);
raylib_phase3.rl2_UnloadTexture(texture);
raylib_phase3.rl2_CloseWindow();
